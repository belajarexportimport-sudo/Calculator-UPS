<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UPS Rate Calculator</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="container">
        <header style="position: relative; text-align: center;">
            <div style="display: inline-flex; align-items: center; justify-content: center; gap: 15px;">
                <img src="ups_logo.png" alt="UPS Logo" style="height: 60px; width: auto;">
                <h1 style="margin: 0;">UPS Rate Calculator</h1>
            </div>
            <div
                style="position: absolute; top: 5px; right: 10px; display: flex; flex-direction: column; align-items: flex-end; gap: 3px;">
                <a href="https://lynk.id/exportimport" target="_blank"
                    style="text-decoration: none; color: #333; font-weight: bold; font-size: 0.75em;">
                    lynk.id/exportimport
                </a>

            </div>
        </header>

        <!-- PRINT HEADER (Only Visible on Print) -->
        <div id="print-header"
            style="display:none; margin-bottom: 20px; border-bottom: 2px solid #000; padding-bottom: 10px;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                <div>
                    <h2 style="margin:0; color:#442e25; font-size: 24pt;">UPS Rate Calculator</h2>
                    <p style="margin:2px 0; font-size:10pt; color: #666;">Authorized Shipping Partner</p>

                    <!-- Shipment Details Table -->
                    <table style="margin-top: 15px; font-size: 10pt; border-collapse: collapse;">
                        <tr>
                            <td style="padding-right:10px;"><strong>Origin:</strong></td>
                            <td id="print-origin">-</td>
                        </tr>
                        <tr>
                            <td style="padding-right:10px;"><strong>Destination:</strong></td>
                            <td id="print-dest">-</td>
                        </tr>
                        <tr>
                            <td style="padding-right:10px;"><strong>Service:</strong></td>
                            <td id="print-service">-</td>
                        </tr>
                        <tr>
                            <td style="padding-right:10px;"><strong>Weight:</strong></td>
                            <td id="print-weight">-</td>
                        </tr>
                    </table>
                </div>
                <div style="text-align: right;">
                    <h1 style="margin:0; font-size:18pt; text-transform:uppercase; color: #8B0000;">Official Quotation
                    </h1>
                    <p style="margin:5px 0; font-size: 10pt;">Date: <span id="print-date"></span></p>
                    <div
                        style="margin-top: 10px; border: 1px solid #ccc; padding: 10px; width: 200px; text-align: left; float: right;">
                        <strong style="font-size: 9pt; color: #555;">Prepared For:</strong><br>
                        <span id="print-customer" style="font-size: 12pt; font-weight: bold;">-</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- PRINT FOOTER (Copyright) -->
        <div id="print-footer"
            style="display:none; position: fixed; bottom: 0; width: 100%; text-align: center; font-size: 9pt; color: #888; border-top: 1px solid #ddd; padding-top: 5px;">
            &copy; lynk.id/exportimport | UPS Rate Calculator
        </div>

        <!-- Scripts for Duty Tax Data -->
        <script src="hs_data.js"></script>
        <script src="kurs_data.js"></script>

        <form id="calculator-form">
            <div class="main-grid">
                <!-- Left Column: Shipment & Rates -->
                <div class="left-col">
                    <!-- Shipment Detail -->
                    <div class="section-box print-hidden">
                        <div class="section-header">Shipment Detail</div>
                        <div class="section-content">
                            <div class="input-row">
                                <label>Date</label>
                                <input type="date" id="shipmentDate" style="width: 100%;">
                            </div>
                            <div class="input-row">
                                <label>Traffic</label>
                                <div class="toggle-container" style="display:flex; gap:5px;">
                                    <input type="radio" id="type-export" name="shipmentType" value="export" checked>
                                    <label for="type-export" style="font-weight:normal;">Export</label>
                                    <input type="radio" id="type-import" name="shipmentType" value="import"> <label
                                        for="type-import" style="font-weight:normal;">Import</label>
                                </div>
                            </div>
                            <div class="input-row">
                                <label>Service</label>
                                <select id="serviceType">
                                    <option value="wwef">Worldwide Express Freight (WWEF)</option>
                                    <option value="saver" selected>Express Saver</option>
                                    <option value="expedited">Expedited</option>
                                </select>
                            </div>
                            <div class="input-row">
                                <label>Content Type</label>
                                <select id="contentType">
                                    <option value="package" selected>Package (Non-Document)</option>
                                    <option value="document">Document / Envelope (Max 5kg)</option>
                                </select>
                            </div>

                            <!-- WWEF Minimum Weight Notification -->
                            <div id="wwef-notification" class="wwef-notif"
                                style="display:none; margin-top: 10px; padding: 10px; background-color: #fff3cd; border: 1px solid #ffc107; border-radius: 4px; color: #856404;">
                                <strong>‚ö†Ô∏è WWEF Service:</strong> Minimum 71 kg / collie
                            </div>

                            <div class="input-row">
                                <label>Origin</label>
                                <input type="hidden" id="origin" value="other">
                                <input type="text" id="originCountry" placeholder="Country Name" list="country-list"
                                    style="margin-top:5px; width:100%;">
                                <input type="text" id="originPostCode" placeholder="Postal Code"
                                    style="margin-top:5px; width:100%;">
                                <input type="text" id="originCity" placeholder="City" list="originCities"
                                    style="margin-top:5px; width:100%;">

                            </div>
                            <div class="input-row">
                                <label>Destination</label>
                                <input type="hidden" id="destination" value="other">
                                <input type="text" id="destinationCountry" placeholder="Country Name"
                                    list="country-list" style="margin-top:5px; width:100%;">
                                <input type="text" id="destinationPostCode" placeholder="Postal Code"
                                    style="margin-top:5px; width:100%;">
                                <input type="text" id="destinationCity" placeholder="City" list="destCities"
                                    style="margin-top:5px; width:100%;">

                            </div>
                            <div class="input-row">
                                <label>Zone</label>
                                <input type="text" id="zoneDisplay" readonly placeholder="-"
                                    style="background:#f0f0f0; width:100%; text-align:center; font-weight:bold;">
                            </div>

                            <!-- No Service Available Warning -->
                            <div id="no-service-warning"
                                style="display:none; margin-top: 10px; padding: 10px; background-color: #ffebee; border: 1px solid #ef5350; border-radius: 4px; color: #c62828;">
                                <strong>‚ö†Ô∏è Warning:</strong> No service available for this country
                            </div>

                            <!-- Individual Service Unavailability Notifications -->
                            <div id="saver-unavailable"
                                style="display:none; margin-top: 10px; padding: 8px; background-color: #fff3e0; border: 1px solid #ff9800; border-radius: 4px; color: #e65100; font-size: 0.9em;">
                                <strong>‚ÑπÔ∏è</strong> Service Express Saver tidak tersedia untuk negara ini
                            </div>
                            <div id="expedited-unavailable"
                                style="display:none; margin-top: 10px; padding: 8px; background-color: #fff3e0; border: 1px solid #ff9800; border-radius: 4px; color: #e65100; font-size: 0.9em;">
                                <strong>‚ÑπÔ∏è</strong> Service Expedited tidak tersedia untuk negara ini
                            </div>
                            <div id="wwef-unavailable"
                                style="display:none; margin-top: 10px; padding: 8px; background-color: #fff3e0; border: 1px solid #ff9800; border-radius: 4px; color: #e65100; font-size: 0.9em;">
                                <strong>‚ÑπÔ∏è</strong> Service WWEF tidak tersedia untuk negara ini
                            </div>
                        </div>
                    </div>

                    <!-- Rates Component -->
                    <!-- Moved Package Table -->
                    <div class="section-box">
                        <div class="section-header">Dimension (cm) & Weight (kg)</div>
                        <div class="table-responsive">
                            <table class="package-table">
                                <thead>
                                    <tr>
                                        <th>Qty</th>
                                        <th>L</th>
                                        <th>W</th>
                                        <th>H</th>
                                        <th>Girth</th>
                                        <th>Weight</th>
                                        <th>C.Weight</th>
                                        <th>Type</th>
                                        <th style="width:30px;"></th>
                                    </tr>
                                </thead>
                                <tbody id="package-rows">
                                    <tr>
                                        <td><input type="number" class="pkg-qty" value="1" min="1" style="width:50px;">
                                        </td>
                                        <td><input type="number" class="pkg-length" step="any"></td>
                                        <td><input type="number" class="pkg-width" step="any"></td>
                                        <td><input type="number" class="pkg-height" step="any"></td>
                                        <td><input type="number" class="pkg-girth" readonly style="background:#eee;">
                                        </td>
                                        <td><input type="number" class="pkg-weight" step="any"></td>
                                        <td><input type="number" class="pkg-cweight" readonly style="background:#eee;">
                                        </td>
                                        <td><select class="pkg-type">
                                                <option value="box">Box</option>
                                                <option value="envelope">Envelope</option>
                                                <option value="styrofoam">Styrofoam Box</option>
                                                <option value="sack">Sack / Karung</option>
                                                <option value="pail">Pail / Ember</option>
                                                <option value="cylinder">Cylinder</option>
                                                <option value="trapezium">Trapezium</option>
                                                <option value="drum">Drum</option>
                                                <option value="other">Other</option>
                                            </select></td>
                                        <td style="text-align:center;">
                                            <button type="button" class="btn-remove-row"
                                                style="background:none; border:none; cursor:pointer; color:red; font-weight:bold; font-size:1.2em;"
                                                onclick="removePackageRow(this)">√ó</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <button type="button" onclick="addPackageRow()"
                                style="margin-top:5px; width:100%; padding:5px; background:#f0f0f0; border:1px dashed #ccc; cursor:pointer; color:#0645ad;">+
                                Tambah Collie / Box</button>
                        </div>
                    </div>
                    <div id="wwef-unavailable-overlay"
                        style="display:none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000; background-color: rgba(255, 235, 238, 0.98); border: 3px solid #ef5350; border-radius: 8px; padding: 30px 40px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); text-align: center; min-width: 400px;">
                        <div style="font-size: 3em; margin-bottom: 15px;">‚ö†Ô∏è</div>
                        <div style="font-size: 1.3em; font-weight: bold; color: #c62828; margin-bottom: 10px;">
                            Service WWEF Tidak Tersedia
                        </div>
                        <div style="font-size: 1em; color: #c62828;">
                            untuk negara ini
                        </div>
                    </div>

                    <!-- WWEF Limit Exceeded Blocking Overlay -->
                    <div id="wwef-limit-overlay"
                        style="display:none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1001; background-color: rgba(255, 243, 205, 0.98); border: 3px solid #ff9800; border-radius: 8px; padding: 30px 40px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); text-align: center; min-width: 450px; max-width: 500px;">
                        <div style="font-size: 3em; margin-bottom: 15px;">‚ö†Ô∏è</div>
                        <div style="font-size: 1.3em; font-weight: bold; color: #e65100; margin-bottom: 10px;">
                            Warning: Dimensi/Berat Melebihi Batas</div>
                        <div id="wwef-limit-details" style="text-align: left; margin-bottom: 20px;">
                        </div>
                        <button onclick="document.getElementById('wwef-limit-overlay').style.display='none'"
                            class="ups-btn">Tutup</button>
                    </div>

                    <!-- Threshold Warning Container -->

                    <!-- Rates Component -->
                    <div class="section-box print-hidden">
                        <div class="section-header">Rates Component
                        </div>
                        <div class="section-content">
                            <!-- Service Recommendation -->
                            <div id="service-recommendation"
                                style="margin-bottom: 10px; padding: 10px; border: 1px solid #ccc; background-color: #f9f9f9; display: none;">
                                <strong style="display: block; margin-bottom: 5px;">Recommended Service:</strong>
                                <span id="recommendation-text" style="font-weight: bold;">-</span>
                            </div>

                            <div class="input-row">
                                <label id="basicRateLabel">Basic Rate (/kg)</label>
                                <input type="number" id="basicRate" min="0" placeholder="IDR/kg" required>
                            </div>
                            <div class="input-row">
                                <label></label>
                                <label style="font-weight:normal; font-size:0.9em;">
                                    <input type="checkbox" id="toggle-discount"> Add Discount?
                                </label>
                            </div>
                            <div class="input-row hidden" id="discount-row">
                                <label>Discount</label>
                                <select id="discount">
                                    <option value="0">0% (No Discount)</option>
                                    <option value="3">3%</option>
                                    <option value="5">5%</option>
                                    <option value="10">10%</option>
                                    <option value="15">15%</option>
                                    <option value="20">20%</option>
                                    <option value="25">25%</option>
                                    <option value="30">30%</option>
                                    <option value="35">35%</option>
                                    <option value="40">40%</option>
                                    <option value="45">45%</option>
                                    <option value="50">50%</option>
                                    <option value="55">55%</option>
                                    <option value="60">60%</option>
                                    <option value="65">65%</option>
                                    <option value="70">70%</option>
                                    <option value="75">75%</option>
                                    <option value="80">80%</option>
                                    <option value="85">85%</option>
                                    <option value="90">90%</option>
                                </select>
                            </div>
                            <div class="input-row">
                                <label>FSI (%)
                                    <a href="https://www.ups.com/id/en/support/shipping-support/shipping-costs-rates/fuel-surcharges"
                                        target="_blank" style="font-size:0.8em; margin-left:5px;">(Check)</a>
                                </label>
                                <div style="display:flex; gap:5px; align-items:center;">
                                    <input type="number" id="fsi" step="0.01" min="0" placeholder="%" required>
                                    <small id="fsi-source-label" style="font-size:0.7em; color:gray;">(Default)</small>
                                </div>
                            </div>

                            <div class="input-row">
                                <label>VAT</label>
                                <input type="text" value="1.1%" disabled>
                            </div>
                        </div>
                    </div>



                    <!-- Optional Surcharges -->
                    <div class="section-box print-hidden">
                        <div class="section-header">Optional Surcharges</div>
                        <div class="section-content">
                            <div class="optional-section" id="dropdown-options">
                                <label class="checkbox-item"><input type="checkbox" id="check-ea" value="extendedArea">
                                    Extended
                                    Area</label>
                                <label class="checkbox-item"><input type="checkbox" id="check-ra" value="remoteArea">
                                    Remote
                                    Area</label>
                                <label class="checkbox-item"><input type="checkbox" value="peb"> PEB</label>
                                <label class="checkbox-item"><input type="checkbox" value="residential">
                                    Residential (Saver & Expedited)</label>
                                <label class="checkbox-item"><input type="checkbox" value="residential_wwef">
                                    Residential (WWEF)</label>
                                <label class="checkbox-item"><input type="checkbox" value="adultSignature"> Adult
                                    Signature</label>
                                <label class="checkbox-item"><input type="checkbox" value="deliveryConfirmation">
                                    Delivery Confirmation</label>
                                <label class="checkbox-item"><input type="checkbox" value="alternateBroker">
                                    Alternate
                                    Broker</label>
                                <label class="checkbox-item"><input type="checkbox" value="dutyTaxForward"> Duty Tax
                                    Forward</label>
                                <label class="checkbox-item"><input type="checkbox" value="ipf"> IPF</label>
                                <label class="checkbox-item"><input type="checkbox" value="paperInvoice"> Paper
                                    Invoice</label>
                            </div>
                        </div>
                    </div>
                    <!-- OPTIONAL: DUTY & TAX SECTION -->
                    <div class="section-box print-hidden">
                        <div class="section-header"
                            style="display:flex; justify-content:space-between; align-items:center;">
                            <span>Est. Import Duty & Tax</span>
                            <label
                                style="font-size:0.8em; display:flex; align-items:center; color:white; cursor:pointer;">
                                <input type="checkbox" id="enable-duty-tax" style="margin-right:5px; cursor:pointer;">
                                Enable
                            </label>
                        </div>
                        <div class="section-content" id="duty-tax-inputs"
                            style="display:none; transition: all 0.3s ease;">

                            <!-- Importer Type -->
                            <div class="input-row"
                                style="margin-bottom:10px; border-bottom:1pxdashed #eee; padding-bottom:10px;">
                                <label>Tipe Importir</label>
                                <select id="importer-type" style="width:100%; margin-top:5px;">
                                    <option value="company" selected>Company (Perusahaan)</option>
                                    <option value="personal">Personal (Pribadi)</option>
                                </select>
                            </div>

                            <!-- Multi-row HS Code & Value Section -->
                            <div class="input-row" style="margin-bottom:10px;">
                                <label style="width:100%;">Items (HS Code & Value)
                                    <a href="https://insw.go.id/intr" target="_blank"
                                        style="float:right; font-size:0.85em; color:#0645ad; text-decoration:underline;">
                                        üîç Cek INSW
                                    </a>
                                </label>
                                <div class="table-responsive" style="margin-top:5px;">
                                    <table class="duty-table"
                                        style="width:100%; border-collapse: collapse; font-size: 0.9em;">
                                        <thead>
                                            <tr style="background:#f0f0f0; border-bottom:1px solid #ccc;">
                                                <th style="padding:5px; text-align:left; width: 45%;">HS Code /
                                                    Description</th>
                                                <th style="padding:5px; text-align:center; width: 15%;">BM %</th>
                                                <th style="padding:5px; text-align:left; width: 40%;">Value (FOB)</th>
                                            </tr>
                                        </thead>
                                        <tbody id="duty-rows">
                                            <!-- Row 1 -->
                                            <tr>
                                                <td style="padding:5px; vertical-align:top;">
                                                    <input type="text" class="hs-code-input"
                                                        placeholder="Search HS Code..." style="width:100%;">
                                                    <div class="hs-results-container"
                                                        style="display:none; position:absolute; z-index:100; background:white; border:1px solid #ccc; max-height:150px; overflow-y:auto; width:200px;">
                                                    </div>
                                                    <div class="selected-hs-display"
                                                        style="font-size:0.8em; color:#0645ad; display:none;"></div>
                                                    <div style="margin-top:2px;"><a href="#"
                                                            onclick="checkINSW(this); return false;"
                                                            style="font-size:0.75em; text-decoration:none;">üìã Copy HS &
                                                            Cek INSW</a></div>
                                                </td>
                                                <td style="padding:5px; text-align:center; vertical-align:top;">
                                                    <input type="number" class="hs-rate-input" value="0" min="0"
                                                        step="0.1" style="width:50px; text-align:center;">
                                                </td>
                                                <td style="padding:5px; vertical-align:top;">
                                                    <div style="display:flex; gap:2px;">
                                                        <select class="row-currency"
                                                            style="width:50px; font-size:0.8em;">
                                                            <option value="USD">$</option>
                                                            <option value="IDR">Rp</option>
                                                        </select>
                                                        <input type="text" class="row-value-input" placeholder="0"
                                                            style="width:100%;">
                                                    </div>
                                                </td>
                                            </tr>
                                            <!-- Row 2 -->
                                            <tr>
                                                <td style="padding:5px; vertical-align:top;">
                                                    <input type="text" class="hs-code-input"
                                                        placeholder="Search HS Code..." style="width:100%;">
                                                    <div class="hs-results-container"
                                                        style="display:none; position:absolute; z-index:100; background:white; border:1px solid #ccc; max-height:150px; overflow-y:auto; width:200px;">
                                                    </div>
                                                    <div class="selected-hs-display"
                                                        style="font-size:0.8em; color:#0645ad; display:none;"></div>
                                                </td>
                                                <td style="padding:5px; text-align:center; vertical-align:top;">
                                                    <input type="number" class="hs-rate-input" value="0" min="0"
                                                        step="0.1" style="width:50px; text-align:center;">
                                                </td>
                                                <td style="padding:5px; vertical-align:top;">
                                                    <div style="display:flex; gap:2px;">
                                                        <select class="row-currency"
                                                            style="width:50px; font-size:0.8em;">
                                                            <option value="USD">$</option>
                                                            <option value="IDR">Rp</option>
                                                        </select>
                                                        <input type="text" class="row-value-input" placeholder="0"
                                                            style="width:100%;">
                                                    </div>
                                                </td>
                                            </tr>
                                            <!-- Row 3 -->
                                            <tr>
                                                <td style="padding:5px; vertical-align:top;">
                                                    <input type="text" class="hs-code-input"
                                                        placeholder="Search HS Code..." style="width:100%;">
                                                    <div class="hs-results-container"
                                                        style="display:none; position:absolute; z-index:100; background:white; border:1px solid #ccc; max-height:150px; overflow-y:auto; width:200px;">
                                                    </div>
                                                    <div class="selected-hs-display"
                                                        style="font-size:0.8em; color:#0645ad; display:none;"></div>
                                                </td>
                                                <td style="padding:5px; text-align:center; vertical-align:top;">
                                                    <input type="number" class="hs-rate-input" value="0" min="0"
                                                        step="0.1" style="width:50px; text-align:center;">
                                                </td>
                                                <td style="padding:5px; vertical-align:top;">
                                                    <div style="display:flex; gap:2px;">
                                                        <select class="row-currency"
                                                            style="width:50px; font-size:0.8em;">
                                                            <option value="USD">$</option>
                                                            <option value="IDR">Rp</option>
                                                        </select>
                                                        <input type="text" class="row-value-input" placeholder="0"
                                                            style="width:100%;">
                                                    </div>
                                                </td>
                                            </tr>
                                            <!-- Row 4 -->
                                            <tr>
                                                <td style="padding:5px; vertical-align:top;">
                                                    <input type="text" class="hs-code-input"
                                                        placeholder="Search HS Code..." style="width:100%;">
                                                    <div class="hs-results-container"
                                                        style="display:none; position:absolute; z-index:100; background:white; border:1px solid #ccc; max-height:150px; overflow-y:auto; width:200px;">
                                                    </div>
                                                    <div class="selected-hs-display"
                                                        style="font-size:0.8em; color:#0645ad; display:none;"></div>
                                                </td>
                                                <td style="padding:5px; text-align:center; vertical-align:top;">
                                                    <input type="number" class="hs-rate-input" value="0" min="0"
                                                        step="0.1" style="width:50px; text-align:center;">
                                                </td>
                                                <td style="padding:5px; vertical-align:top;">
                                                    <div style="display:flex; gap:2px;">
                                                        <select class="row-currency"
                                                            style="width:50px; font-size:0.8em;">
                                                            <option value="USD">$</option>
                                                            <option value="IDR">Rp</option>
                                                        </select>
                                                        <input type="text" class="row-value-input" placeholder="0"
                                                            style="width:100%;">
                                                    </div>
                                                </td>
                                            </tr>
                                            <!-- Row 5 -->
                                            <tr>
                                                <td style="padding:5px; vertical-align:top;">
                                                    <input type="text" class="hs-code-input"
                                                        placeholder="Search HS Code..." style="width:100%;">
                                                    <div class="hs-results-container"
                                                        style="display:none; position:absolute; z-index:100; background:white; border:1px solid #ccc; max-height:150px; overflow-y:auto; width:200px;">
                                                    </div>
                                                    <div class="selected-hs-display"
                                                        style="font-size:0.8em; color:#0645ad; display:none;"></div>
                                                </td>
                                                <td style="padding:5px; text-align:center; vertical-align:top;">
                                                    <input type="number" class="hs-rate-input" value="0" min="0"
                                                        step="0.1" style="width:50px; text-align:center;">
                                                </td>
                                                <td style="padding:5px; vertical-align:top;">
                                                    <div style="display:flex; gap:2px;">
                                                        <select class="row-currency"
                                                            style="width:50px; font-size:0.8em;">
                                                            <option value="USD">$</option>
                                                            <option value="IDR">Rp</option>
                                                        </select>
                                                        <input type="text" class="row-value-input" placeholder="0"
                                                            style="width:100%;">
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="input-row">
                                <label>Insurance</label>
                                <div style="display:flex; gap:5px;">
                                    <span style="padding:5px; background:#eee;">$</span>
                                    <input type="text" id="val-insurance" placeholder="0" style="flex:1;">
                                </div>
                            </div>

                            <div class="input-row">
                                <label style="width:100%;">Kurs (IDR)
                                    <a href="https://fiskal.kemenkeu.go.id/informasi-publik/kurs-pajak" target="_blank"
                                        style="float:right; font-size:0.85em; color:#0645ad; text-decoration:underline;">
                                        üîç Cek Kurs Pajak (Kemenkeu)
                                    </a>
                                </label>
                                <div style="display:flex; gap:5px;">
                                    <input type="text" id="val-kurs" value="16.500" style="flex:1;">
                                </div>
                            </div>

                            <div class="input-row">
                                <label>NPWP / API?</label>
                                <select id="has-npwp">
                                    <option value="api">Punya API (PPh 2.5%)</option>
                                    <option value="yes" selected>Punya NPWP (PPh 7.5% - 10%)</option>
                                    <option value="no">Non-NPWP (PPh 15% - 20%)</option>
                                </select>
                            </div>

                            <!-- Import Handling Section -->
                            <div style="margin-top:15px; border-top:1px dashed #ccc; padding-top:10px;">
                                <label
                                    style="display:flex; align-items:center; cursor:pointer; font-weight:bold; font-size:0.9em; margin-bottom:5px;">
                                    <input type="checkbox" id="enable-handling" style="margin-right:5px;"> Hitung Import
                                    Handling?
                                </label>
                                <div id="handling-inputs" style="display:none; padding-left:5px;">
                                    <div class="input-row">
                                        <label style="font-size:0.85em;">Handling Fee (Min 200k/2.5%)</label>
                                        <div style="display:flex; gap:5px;">
                                            <span style="padding:2px 5px; background:#eee; font-size:0.8em;">Rp</span>
                                            <input type="text" id="val-handling-fee" value="0"
                                                style="flex:1; background:#f9f9f9; color:#666;" readonly>
                                        </div>
                                    </div>
                                    <div class="input-row">
                                        <label style="font-size:0.85em;">Disbursement (Min 94k/5.9%)</label>
                                        <div style="display:flex; gap:5px;">
                                            <span style="padding:2px 5px; background:#eee; font-size:0.8em;">Rp</span>
                                            <input type="text" id="val-disbursement-fee" value="0"
                                                style="flex:1; background:#f9f9f9; color:#666;" readonly>
                                        </div>
                                    </div>
                                    <div class="input-row">
                                        <label style="font-size:0.85em;">Doc Fee</label>
                                        <div style="display:flex; gap:5px;">
                                            <span style="padding:2px 5px; background:#eee; font-size:0.8em;">Rp</span>
                                            <input type="text" id="val-doc-fee" value="50.000" style="flex:1;">
                                        </div>
                                    </div>
                                    <div class="input-row">
                                        <label style="font-size:0.85em;">Hari di Gudang</label>
                                        <div style="display:flex; gap:5px;">
                                            <input type="number" id="val-warehouse-days" value="0" min="0"
                                                style="flex:1;">
                                            <span
                                                style="padding:2px 5px; background:#eee; font-size:0.8em; align-self:center;">Hari</span>
                                        </div>
                                    </div>
                                    <div class="input-row">
                                        <label style="font-size:0.85em;">Sewa Gudang</label>
                                        <div style="display:flex; gap:5px;">
                                            <span style="padding:2px 5px; background:#eee; font-size:0.8em;">Rp</span>
                                            <input type="text" id="val-storage-fee" value="0" style="flex:1;" readonly>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Right Column: Dimensions & Results -->
                <div class="right-col">
                    <!-- Calculate Button -->
                    <button type="button" class="btn-calculate" onclick="calculate();"
                        style="width: 100%; margin-top: 10px; margin-bottom: 10px; background: #8B0000; color: #fff; font-size: 18px; font-weight: bold; padding: 12px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); border: none; text-transform: uppercase; letter-spacing: 2px; border-radius: 4px;">CALCULATE</button>

                    <!-- Calculation Result (Moved to Right Column) -->
                    <div class="section-box" style="margin-top: 20px;">
                        <div class="section-header">Calculation Result</div>

                        <!-- MOVED HERE: Heavy Warning (WWEF Force / Info) -->
                        <div id="heavy-warning" class="warning-box"
                            style="display:none; margin: 10px 15px; padding: 12px; border: 2px solid; border-radius: 5px;">
                            <h4 style="margin-top:0;">Info / Warning Dimensi</h4>
                            <div id="heavy-warning-details"></div>

                            <!-- Static info text for Forced WWEF cases (hidden by default unless JS populates/shows context) -->
                            <div id="wwef-force-text" style="display:none; font-size:0.9em; margin-top:10px;">
                                <p><strong>Jika salah satu collie terkategori Large / Heavy, disarankan split
                                        shipment.</strong></p>
                                <p>Jika di-combine, semua collie terkena min weight 71kg (WWEF).</p>
                                <p><strong>Harap gunakan service WWEF.</strong> (Rate dasar WWEF berbeda).</p>
                            </div>
                        </div>

                        <!-- MOVED HERE: LPS/AHS Warning Box (Safe from overwrite) -->
                        <div id="lps-warning-box"
                            style="display:none; margin: 10px 15px; padding: 12px; background-color: #fff3e0; border: 2px solid #ff9800; border-radius: 5px; color: #bf360c;">
                            <div style="font-weight: bold; font-size: 1.1em; margin-bottom: 5px;">‚ö†Ô∏è PERINGATAN
                                SURCHARGE
                            </div>
                            <div id="lps-warning-details"></div>
                        </div>

                        <div class="section-content" id="results">

                            <div class="result-row total-row">
                                <span>Total Chargeable Weight:</span>
                                <span id="res-total-weight">0.00 kg</span>
                            </div>
                            <div class="result-row total-row">
                                <span>Base Cost:</span>
                                <span id="res-base-cost">IDR 0</span>
                            </div>
                            <div id="surcharges-list"></div>
                            <div class="result-row total-row"
                                style="font-size: 1.2em; color: #d32f2f; margin-top: 10px; border-top: 2px solid #eee; padding-top: 10px;">
                                <span id="res-total-cost">IDR 0</span>
                            </div>

                            <!-- Duty & Tax Result (Hidden by default) -->
                            <div id="duty-tax-result"
                                style="margin-top: 15px; padding-top: 10px; border-top: 2px solid #333; display: none;">
                                <h4 style="margin:0 0 10px 0; color:#2c3e50;">Est. Import Tax (PDRI)</h4>

                                <div class="result-row"><span>Nilai Pabean (CIF):</span> <span id="res-cif">Rp 0</span>
                                </div>
                                <div class="result-row"><span>Bea Masuk:</span> <span id="res-bm">Rp 0</span></div>
                                <div class="result-row"><span>PPN (11%):</span> <span id="res-ppn">Rp 0</span></div>
                                <div class="result-row"><span>PPh Impor:</span> <span id="res-pph">Rp 0</span></div>

                                <div class="result-row hidden" id="res-handling-row"
                                    style="color:#555; border-top:1px dotted #ccc; margin-top:5px; padding-top:2px;">
                                    <span>+ Handling:</span> <span id="res-handling">Rp 0</span>
                                </div>

                                <div class="result-row total-row"
                                    style="margin-top:5px; font-size:1.1em; color:#d35400;">
                                    <span>Total Pajak (+Handling):</span> <span id="res-total-tax">Rp 0</span>
                                </div>

                                <div style="font-size:0.75em; color:#999; margin-top:5px; font-style:italic;">
                                    *Freight: <span id="res-used-freight">0</span>.
                                    Kurs: <span id="res-used-kurs">16.500</span>.
                                </div>
                            </div>

                            <!-- Transit Prediction Model -->
                            <div id="transit-prediction"
                                style="margin-top: 15px; padding-top: 10px; border-top: 1px dashed #ccc; display: none;">
                                <div
                                    style="display: flex; justify-content: flex-start; align-items: center; margin-bottom: 5px; gap: 10px;">
                                    <span style="font-weight: bold; color: #555;">Est. Transit Time:</span>
                                    <span id="pred-transit-time" style="font-weight: bold; color: #333;">-</span>
                                </div>
                                <div style="display: flex; flex-direction: column;">
                                    <span style="font-weight: bold; color: #555; font-size: 0.9em;">Est. Routing:</span>
                                    <span id="pred-routing"
                                        style="font-size: 0.85em; color: #666; word-break: break-all;">-</span>
                                </div>
                            </div>

                            <!-- CUSTOMER NAME INPUT (Visible) -->
                            <div class="no-print"
                                style="margin-top: 20px; border-top: 1px dashed #ccc; padding-top: 10px;">
                                <label for="input-customer-name"
                                    style="display: block; font-weight: bold; margin-bottom: 5px; color: #555;">Customer
                                    Name (for Quote):</label>
                                <input type="text" id="input-customer-name" placeholder="E.g. PT. Maju Mundur"
                                    style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                            </div>

                            <!-- PRINT BUTTON (Visible on Screen, Hidden on Print) -->
                            <button type="button" class="btn-print no-print" onclick="window.print()"
                                style="margin-top: 10px; width: 100%; padding: 10px; background: #333; color: white; border: none; font-weight: bold; cursor: pointer; text-transform: uppercase;">
                                üìÑ Download / Print Official Quote
                            </button>

                        </div>
                    </div>

                    <!-- TERMS & CONDITIONS BOX -->
                    <div class="section-box"
                        style="margin-top: 20px; border: 1px solid #ccc; background-color: #f8f9fa;">
                        <div class="section-header"
                            style="background-color: #e9ecef; color: #495057; font-size: 0.9em;">
                            Syarat & Ketentuan (Terms & Conditions)
                        </div>
                        <div class="section-content" style="font-size: 0.8em; color: #555; line-height: 1.5;">
                            <ul style="padding-left: 15px; margin: 0;">
                                <li id="tc-components" style="margin-bottom: 5px;">
                                    <strong>Komponen Biaya:</strong> Estimasi harga di atas <strong>SUDAH
                                        TERMASUK</strong> Basic Rate, Fuel Surcharge (FSI), PPN (VAT) 1.1%, serta
                                    surcharge lain jika terdeteksi (seperti: Brokerage Import, Surge Fee, Additional
                                    Handling Surcharge, Large Package Surcharge, Remote/Extended Area).
                                </li>
                                <li id="tc-duty-disclaimer" style="margin-bottom: 5px;">
                                    <strong>Pengecualian:</strong> Harga <strong>BELUM TERMASUK</strong> Bea Masuk
                                    (Duty) & Pajak Impor (Tax) negara tujuan, biaya penyimpanan gudang (storage), atau
                                    biaya tak terduga lainnya akibat pemeriksaan pabean.
                                </li>
                                <li style="margin-bottom: 5px;">
                                    <strong>Akurasi Data:</strong> Perhitungan berdasarkan data berat dan dimensi yang
                                    Anda input. Penyesuaian harga dapat terjadi jika hasil penimbangan operasional UPS
                                    berbeda dengan input Anda.
                                </li>
                                <li id="tc-wwef-disclaimer">
                                    <strong>Service WWEF:</strong> Untuk berat >70kg/collie atau total dimensi besar,
                                    UPS berhak mengalihkan ke layanan Freight (WWEF) dengan ketentuan minimum 71kg per
                                    collie.
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>


    </div>
    </div>

    </form>

    <!-- Warning Messages -->
    <div id="omx-options" class="warning-box" style="display:none;">
        <h4>Opsi Berat >= 70kg atau Batas Terlampaui</h4>
        <p>Pengiriman ini memenuhi syarat untuk Worldwide Express Freight (WWEF) yang menghapus biaya tambahan
            tertentu.</p>
        <div class="comparison-options">
            <div class="option-box" id="opt-a">
                <p id="opt-a-text"><strong>Opsi 1 (WWEF):</strong> -</p>
            </div>
            <div class="option-box" id="opt-b">
                <p id="opt-b-text"><strong>Opsi 2 (Saver):</strong> -</p>
            </div>
        </div>
    </div>

    <div id="mixed-warning" class="warning-box"
        style="display:none; background-color: #fff3cd; color: #856404; border-color: #ffeeba;">
        <h4>Peringatan Paket Campuran</h4>
        <p>Pengiriman Anda berisi paket Berat/Besar DAN Ringan/Kecil. Disarankan untuk memisahkannya menjadi dua
            pengiriman berbeda (Satu WWEF, Satu Saver) untuk menghindari biaya minimum 71kg yang diterapkan pada
            paket kecil.</p>
    </div>



    <div id="debug-output"
        style="margin-top: 20px; padding: 10px; background: #f0f0f0; border: 1px solid #ccc; font-family: monospace; white-space: pre-wrap; display: none;">
    </div>

    </div>

    <datalist id="country-list">
        <!-- Options will be populated dynamically by script.js -->
    </datalist>


    <datalist id="originCities"></datalist>
    <datalist id="destCities"></datalist>

    <script src="rates_data.js"></script>
    <script src="city_data.js"></script>
    <script src="zip_screening_lib.js"></script>
    <script src="fsi_data.js"></script>
    <script src="hs_data.js"></script>
    <script src="script.js?v=24"></script>
    <div style="position: fixed; bottom: 10px; width: 100%; text-align: center; pointer-events: none; z-index: 9999;">
        <p
            style="font-size: 10px; color: #666; background: rgba(255,255,255,0.9); display: inline-block; padding: 4px 12px; border-radius: 20px; border: 1px solid #ddd; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            &copy; 2025 UPS Calculator ‚Ä¢ Powered by <a href="https://zensheet.my.id" target="_blank"
                style="color: #d35400; font-weight: bold; text-decoration: none; pointer-events: auto;">zensheet.my.id</a>
            üöÄ
        </p>
    </div>
</body>

</html>